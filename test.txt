test file building with data